<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced NWB Evaluation Report - Final with Detailed Workflow Trace</title>
    <style>
        /* ===== GLOBAL STYLES ===== */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6; color: #333; background: #f5f5f5; padding: 20px;
        }

        .container {
            max-width: 1400px; margin: 0 auto; background: white;
            padding: 40px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* ===== HEADER ===== */
        .header { border-bottom: 3px solid #2563eb; padding-bottom: 20px; margin-bottom: 30px; }
        .header h1 { color: #1e293b; font-size: 2em; margin-bottom: 10px; }
        .header .status {
            display: inline-block; padding: 8px 16px; border-radius: 6px;
            font-weight: 600; font-size: 0.95em;
        }
        .status.passed-with-issues { background: #fef3c7; color: #92400e; border: 2px solid #fbbf24; }

        h2 {
            color: #1e293b; font-size: 1.6em; margin: 30px 0 15px;
            padding: 12px 0 12px 15px; border-left: 5px solid #3b82f6;
        }
        h3 { color: #475569; font-size: 1.3em; margin: 20px 0 10px; }
        h4 { color: #64748b; font-size: 1.1em; margin: 15px 0 8px; }

        /* ===== QUICK ACTIONS TOOLBAR ===== */
        .quick-actions-toolbar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white; padding: 20px; border-radius: 8px; margin-bottom: 30px;
            position: sticky; top: 20px; z-index: 100;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        .quick-actions-toolbar h4 { margin-bottom: 15px; font-size: 1.1em; color: white; }
        .quick-action-buttons { display: flex; gap: 12px; flex-wrap: wrap; }
        .quick-action {
            padding: 12px 20px; border: none; border-radius: 6px; cursor: pointer;
            font-weight: 600; display: flex; align-items: center; gap: 8px;
            background: white; color: #333; transition: transform 0.2s, box-shadow 0.2s;
        }
        .quick-action:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        .quick-action.critical { border-left: 4px solid #dc2626; }
        .quick-action.high { border-left: 4px solid #f59e0b; }
        .quick-action .time { font-size: 0.85em; color: #64748b; margin-left: auto; }
        .completion-estimate {
            margin-top: 15px; padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.3); font-size: 0.95em;
        }

        /* ===== MISSING FIELDS ALERT ===== */
        .missing-fields-alert {
            background: #fef2f2; border: 2px solid #fca5a5; border-left: 6px solid #dc2626;
            border-radius: 8px; padding: 20px; margin-bottom: 30px;
        }
        .missing-fields-alert h4 { color: #991b1b; margin-bottom: 10px; font-size: 1.2em; }
        .missing-fields-list { margin: 15px 0; }
        .missing-field {
            display: flex; align-items: center; padding: 12px; margin: 8px 0;
            background: white; border-radius: 6px; border-left: 4px solid #dc2626;
        }
        .missing-field .field-name { flex: 1; font-weight: 600; }
        .missing-field .impact { margin: 0 12px; font-size: 0.9em; }
        .missing-field button {
            padding: 6px 12px; background: #2563eb; color: white; border: none;
            border-radius: 4px; cursor: pointer; font-size: 0.9em;
        }
        .missing-field button:hover { background: #1d4ed8; }
        .missing-fields-summary {
            margin-top: 15px; padding: 12px; background: #fee2e2;
            border-radius: 4px; font-size: 0.95em;
        }

        /* ===== QUALITY DASHBOARD ===== */
        .quality-dashboard {
            background: #f8fafc; padding: 30px; border-radius: 8px;
            margin-bottom: 30px; border: 1px solid #e2e8f0;
        }
        .quality-metrics-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px; margin-bottom: 25px;
        }
        .quality-metric {
            background: white; padding: 20px; border-radius: 8px; text-align: center;
            border: 1px solid #e2e8f0; transition: transform 0.2s, box-shadow 0.2s;
        }
        .quality-metric:hover { transform: translateY(-4px); box-shadow: 0 8px 16px rgba(0,0,0,0.1); }
        .metric-header { display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 15px; }
        .metric-icon { font-size: 1.5em; }
        .metric-header h4 { font-size: 1em; color: #475569; margin: 0; }
        .score-circle { width: 120px; height: 120px; margin: 15px auto; position: relative; }
        .score-circle svg { width: 100%; height: 100%; transform: rotate(-90deg); }
        .score-circle circle.bg { fill: none; stroke: #e2e8f0; stroke-width: 8; }
        .score-circle circle.fill { fill: none; stroke-width: 8; stroke-linecap: round; transition: stroke-dashoffset 1s ease; }
        .metric-score.excellent circle.fill { stroke: #10b981; }
        .metric-score.good circle.fill { stroke: #3b82f6; }
        .metric-score.fair circle.fill { stroke: #f59e0b; }
        .metric-score.needs-work circle.fill { stroke: #ef4444; }
        .score-text {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 1.8em; font-weight: 700; color: #1e293b;
        }
        .metric-label { font-weight: 700; font-size: 1.1em; margin: 10px 0 5px; }
        .metric-score.excellent .metric-label { color: #10b981; }
        .metric-score.good .metric-label { color: #3b82f6; }
        .metric-score.fair .metric-label { color: #f59e0b; }
        .metric-score.needs-work .metric-label { color: #ef4444; }
        .metric-description { color: #64748b; font-size: 0.9em; }

        /* ===== METADATA COMPLETENESS ===== */
        .metadata-completeness-section {
            background: #f8fafc; padding: 25px; border-radius: 8px;
            margin-bottom: 30px; border: 1px solid #e2e8f0;
        }
        .progress-bar-container {
            width: 100%; height: 40px; background: #e2e8f0; border-radius: 20px;
            overflow: hidden; position: relative; margin-bottom: 15px;
        }
        .progress-bar {
            height: 100%; background: linear-gradient(90deg, #3b82f6, #2563eb);
            display: flex; align-items: center; justify-content: center;
            transition: width 1s ease; position: relative;
        }
        .progress-label {
            color: white; font-weight: 600; font-size: 0.95em; position: relative; z-index: 1;
        }
        .completeness-details { display: flex; gap: 20px; margin-bottom: 20px; }
        .completeness-details .stat {
            padding: 8px 16px; background: white; border-radius: 6px; border: 1px solid #cbd5e1;
        }
        .completeness-details .stat.critical { border-color: #dc2626; background: #fee2e2; }

        /* ===== METADATA WITH RICH PROVENANCE ===== */
        .metadata-section { margin-bottom: 30px; }
        .metadata-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(450px, 1fr)); gap: 30px;
        }
        .metadata-field {
            background: #f8fafc; padding: 20px; border-radius: 8px; border: 1px solid #e2e8f0;
        }
        .field-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px; }
        .field-label {
            font-weight: 700; color: #475569; font-size: 0.85em;
            text-transform: uppercase; letter-spacing: 0.5px;
        }
        .field-value { font-size: 1.2em; color: #1e293b; font-weight: 600; margin-bottom: 12px; }
        .field-value.missing { color: #dc2626; font-style: italic; font-weight: 500; }

        /* PROVENANCE BOXES */
        .provenance-box {
            padding: 15px; border-radius: 6px; border-left: 4px solid; font-size: 0.9em; line-height: 1.6;
        }
        .provenance-box.ai-parsed { background: #dbeafe; border-left-color: #3b82f6; }
        .provenance-box.ai-inferred { background: #fed7aa; border-left-color: #f59e0b; }
        .provenance-box.file-extracted { background: #d1fae5; border-left-color: #10b981; }
        .provenance-box.system-default { background: #f1f5f9; border-left-color: #94a3b8; }
        .provenance-header {
            font-weight: 700; font-size: 0.85em; text-transform: uppercase;
            letter-spacing: 0.5px; margin-bottom: 8px;
        }
        .provenance-box.ai-parsed .provenance-header { color: #1e40af; }
        .provenance-box.ai-inferred .provenance-header { color: #92400e; }
        .provenance-box.file-extracted .provenance-header { color: #065f46; }
        .provenance-box.system-default .provenance-header { color: #475569; }
        .provenance-details { margin-top: 8px; }
        .provenance-details div { margin: 5px 0; }
        .confidence-display {
            display: inline-block; padding: 4px 10px; border-radius: 12px;
            font-weight: 700; font-size: 0.9em;
        }
        .confidence-display.high { background: #dcfce7; color: #166534; }
        .confidence-display.medium { background: #fef3c7; color: #92400e; }
        .origin-text {
            font-style: italic; color: #64748b; margin-top: 8px;
            padding: 8px; background: rgba(255,255,255,0.5); border-radius: 4px;
        }

        /* ===== COLLAPSIBLE SECTIONS ===== */
        .collapsible-section { margin-bottom: 20px; }
        .collapsible-header {
            background: #f1f5f9; padding: 15px 20px; border-radius: 6px; cursor: pointer;
            display: flex; justify-content: space-between; align-items: center; transition: background 0.2s;
        }
        .collapsible-header:hover { background: #e2e8f0; }
        .collapsible-header h3 { margin: 0; font-size: 1.2em; color: #1e293b; }
        .collapsible-toggle {
            font-size: 1.5em; color: #64748b; transition: transform 0.3s;
        }
        .collapsible-section.open .collapsible-toggle { transform: rotate(180deg); }
        .collapsible-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease; }
        .collapsible-section.open .collapsible-content { max-height: 15000px; padding: 20px; }

        /* ===== WORKFLOW TRACE STYLES ===== */
        .trace-section {
            background: #f8fafc; border: 1px solid #cbd5e1; border-radius: 8px;
            padding: 25px; margin-bottom: 25px;
        }
        .trace-box {
            background: white; border: 1px solid #e2e8f0; border-radius: 6px;
            padding: 20px; margin: 15px 0; font-family: 'Courier New', monospace; font-size: 0.9em;
        }
        .trace-box.highlight { border-left: 4px solid #3b82f6; }
        .trace-item {
            padding: 12px; margin: 10px 0; background: #f1f5f9;
            border-radius: 4px; border-left: 3px solid #94a3b8;
        }
        .trace-item.success { border-left-color: #10b981; background: #ecfdf5; }
        .trace-item.info { border-left-color: #3b82f6; background: #eff6ff; }
        .checksum {
            font-family: 'Courier New', monospace; background: #1e293b; color: #10b981;
            padding: 4px 8px; border-radius: 4px; font-size: 0.85em;
        }
        .timestamp { color: #64748b; font-size: 0.9em; font-weight: 600; }
        .stats-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px; margin: 15px 0;
        }
        .stat-card {
            background: white; padding: 15px; border-radius: 6px; border: 1px solid #e2e8f0;
        }
        .stat-label {
            color: #64748b; font-size: 0.85em; text-transform: uppercase;
            letter-spacing: 0.5px; margin-bottom: 5px;
        }
        .stat-value { color: #1e293b; font-size: 1.3em; font-weight: 700; }
        .code-block {
            background: #1e293b; color: #e2e8f0; padding: 15px; border-radius: 6px;
            overflow-x: auto; font-family: 'Courier New', monospace; font-size: 0.85em;
            line-height: 1.5; margin: 10px 0;
        }
        .code-block .comment { color: #94a3b8; }
        .code-block .key { color: #60a5fa; }
        .code-block .value { color: #10b981; }
        .provenance-chain { margin: 15px 0; padding-left: 25px; border-left: 3px solid #3b82f6; }
        .provenance-step {
            margin: 12px 0; padding: 10px; background: white; border-radius: 4px;
        }
        .badge {
            display: inline-block; padding: 4px 10px; border-radius: 12px;
            font-size: 0.85em; font-weight: 600; margin-right: 8px;
        }
        .badge.success { background: #d1fae5; color: #065f46; }
        .badge.info { background: #dbeafe; color: #1e40af; }
        .badge.warning { background: #fef3c7; color: #92400e; }
        table {
            width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 0.9em;
        }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #e2e8f0; }
        th { background: #f1f5f9; font-weight: 600; color: #475569; }
        tr:hover { background: #f8fafc; }
        .expandable { cursor: pointer; user-select: none; }
        .expandable-content {
            max-height: 0; overflow: hidden; transition: max-height 0.3s ease;
        }
        .expandable-content.open { max-height: 2000px; }
        .expand-icon {
            display: inline-block; transition: transform 0.3s; margin-right: 8px;
        }
        .expandable.open .expand-icon { transform: rotate(90deg); }
        ul { margin: 10px 0 10px 25px; }
        li { margin: 5px 0; }

        /* ===== FOOTER ===== */
        .footer {
            margin-top: 40px; padding-top: 20px; border-top: 1px solid #e2e8f0;
            text-align: center; color: #64748b; font-size: 0.9em;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .container { padding: 20px; }
            .metadata-grid { grid-template-columns: 1fr; }
            .quality-metrics-grid { grid-template-columns: 1fr; }
            .quick-action-buttons { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <h1>üî¨ NWB Evaluation Report</h1>
            <div class="status passed-with-issues">‚ö†Ô∏è PASSED WITH ISSUES</div>
            <p style="margin-top: 10px; color: #64748b;">
                Generated: November 4, 2025 at 4:25 PM | Session: session_20251104_162200
            </p>
        </div>

        <!-- QUICK ACTIONS TOOLBAR -->
        <div class="quick-actions-toolbar">
            <h4>‚ö° Quick Actions</h4>
            <div class="quick-action-buttons">
                <button class="quick-action critical" onclick="alert('Fix DANDI blockers wizard')">
                    <span class="icon">üî¥</span> Fix DANDI Blockers (2) <span class="time">5 min</span>
                </button>
                <button class="quick-action high" onclick="alert('Fix name format')">
                    <span class="icon">‚úèÔ∏è</span> Fix Name Format <span class="time">30 sec</span>
                </button>
                <button class="quick-action" onclick="alert('Re-validate')">
                    <span class="icon">üîÑ</span> Re-validate After Fixes
                </button>
            </div>
            <div class="completion-estimate">
                <strong>Total time to fix all issues:</strong> ~10 minutes
            </div>
        </div>

        <!-- MISSING FIELDS ALERT -->
        <div class="missing-fields-alert">
            <h4>‚ö†Ô∏è Missing Required Metadata (2 critical)</h4>
            <p>The following fields are required for DANDI submission but are currently missing:</p>
            <div class="missing-fields-list">
                <div class="missing-field critical">
                    <span class="field-name">Species</span>
                    <span class="impact">üî¥ DANDI blocker</span>
                    <button onclick="alert('Add species guide')">How to fix</button>
                </div>
                <div class="missing-field critical">
                    <span class="field-name">Subject Age or Date of Birth</span>
                    <span class="impact">üî¥ DANDI blocker</span>
                    <button onclick="alert('Add age guide')">How to fix</button>
                </div>
            </div>
            <div class="missing-fields-summary">
                <strong>Impact:</strong> 2 critical fields must be added before DANDI submission.<br>
                <strong>Estimated time to fix:</strong> 5-10 minutes
            </div>
        </div>

        <!-- QUALITY DASHBOARD -->
        <div class="quality-dashboard">
            <h3>üéØ Quality Assessment Dashboard</h3>
            <div class="quality-metrics-grid">
                <div class="quality-metric">
                    <div class="metric-header"><span class="metric-icon">üìä</span><h4>Completeness</h4></div>
                    <div class="metric-score fair">
                        <div class="score-circle">
                            <svg viewBox="0 0 100 100">
                                <circle class="bg" cx="50" cy="50" r="45"></circle>
                                <circle class="fill" cx="50" cy="50" r="45" stroke-dasharray="283" stroke-dashoffset="155"></circle>
                            </svg>
                            <span class="score-text">45%</span>
                        </div>
                    </div>
                    <p class="metric-label">Fair</p>
                    <p class="metric-description">9 of 20 fields filled</p>
                </div>
                <div class="quality-metric">
                    <div class="metric-header"><span class="metric-icon">üîí</span><h4>Data Integrity</h4></div>
                    <div class="metric-score excellent">
                        <div class="score-circle">
                            <svg viewBox="0 0 100 100">
                                <circle class="bg" cx="50" cy="50" r="45"></circle>
                                <circle class="fill" cx="50" cy="50" r="45" stroke-dasharray="283" stroke-dashoffset="0"></circle>
                            </svg>
                            <span class="score-text">100%</span>
                        </div>
                    </div>
                    <p class="metric-label">Excellent</p>
                    <p class="metric-description">No validation errors</p>
                </div>
                <div class="quality-metric">
                    <div class="metric-header"><span class="metric-icon">üî¨</span><h4>Scientific Value</h4></div>
                    <div class="metric-score good">
                        <div class="score-circle">
                            <svg viewBox="0 0 100 100">
                                <circle class="bg" cx="50" cy="50" r="45"></circle>
                                <circle class="fill" cx="50" cy="50" r="45" stroke-dasharray="283" stroke-dashoffset="85"></circle>
                            </svg>
                            <span class="score-text">70%</span>
                        </div>
                    </div>
                    <p class="metric-label">Good</p>
                    <p class="metric-description">Limited by incomplete metadata</p>
                </div>
                <div class="quality-metric">
                    <div class="metric-header"><span class="metric-icon">üóÑÔ∏è</span><h4>DANDI Ready</h4></div>
                    <div class="metric-score needs-work">
                        <div class="score-circle">
                            <svg viewBox="0 0 100 100">
                                <circle class="bg" cx="50" cy="50" r="45"></circle>
                                <circle class="fill" cx="50" cy="50" r="45" stroke-dasharray="283" stroke-dashoffset="113"></circle>
                            </svg>
                            <span class="score-text">60%</span>
                        </div>
                    </div>
                    <p class="metric-label">Needs Improvement</p>
                    <p class="metric-description">2 required fields missing</p>
                </div>
            </div>
        </div>

        <!-- METADATA COMPLETENESS -->
        <div class="metadata-completeness-section">
            <h3>üìä Metadata Completeness</h3>
            <div class="completeness-visual">
                <div class="progress-bar-container">
                    <div class="progress-bar" style="width: 45%">
                        <span class="progress-label">45% Complete</span>
                    </div>
                </div>
                <div class="completeness-details">
                    <span class="stat"><strong>9 of 20</strong> recommended fields filled</span>
                    <span class="stat critical"><strong>3 of 5</strong> required fields filled</span>
                </div>
            </div>
        </div>

        <!-- METADATA WITH RICH PROVENANCE -->
        <div class="metadata-section">
            <h2>üìã Metadata Details with Provenance</h2>
            <div class="metadata-grid">
                <!-- EXPERIMENTER -->
                <div class="metadata-field">
                    <div class="field-header"><span class="field-label">EXPERIMENTER</span></div>
                    <div class="field-value">Smith, Jane</div>
                    <div class="provenance-box ai-parsed">
                        <div class="provenance-header">AI METADATA</div>
                        <div class="provenance-details">
                            <div><strong>Source:</strong> ai-parsed</div>
                            <div><strong>Confidence:</strong> <span class="confidence-display high">95.0%</span></div>
                            <div class="origin-text">
                                <strong>Origin:</strong> AI parsed from: 'Dr. Jane Smith'
                            </div>
                        </div>
                    </div>
                </div>

                <!-- INSTITUTION -->
                <div class="metadata-field">
                    <div class="field-header"><span class="field-label">INSTITUTION</span></div>
                    <div class="field-value">Massachusetts Institute of Technology</div>
                    <div class="provenance-box ai-parsed">
                        <div class="provenance-header">AI METADATA</div>
                        <div class="provenance-details">
                            <div><strong>Source:</strong> ai-parsed</div>
                            <div><strong>Confidence:</strong> <span class="confidence-display high">90.0%</span></div>
                            <div class="origin-text">
                                <strong>Origin:</strong> AI parsed from: 'MIT'
                            </div>
                        </div>
                    </div>
                </div>

                <!-- EXPERIMENT DESCRIPTION -->
                <div class="metadata-field">
                    <div class="field-header"><span class="field-label">EXPERIMENT DESCRIPTION</span></div>
                    <div class="field-value">Recording neural activity from visual cortex using electrophysiology</div>
                    <div class="provenance-box ai-inferred">
                        <div class="provenance-header">INFERRED METADATA</div>
                        <div class="provenance-details">
                            <div><strong>Source:</strong> ai-inferred</div>
                            <div><strong>Confidence:</strong> <span class="confidence-display high">80.0%</span></div>
                            <div class="origin-text">
                                <strong>Origin:</strong> AI inferred from: 'recording neural activity from the visual cortex'
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SUBJECT ID -->
                <div class="metadata-field">
                    <div class="field-header"><span class="field-label">SUBJECT ID</span></div>
                    <div class="field-value">mouse001</div>
                    <div class="provenance-box ai-parsed">
                        <div class="provenance-header">AI METADATA</div>
                        <div class="provenance-details">
                            <div><strong>Source:</strong> ai-parsed</div>
                            <div><strong>Confidence:</strong> <span class="confidence-display high">95.0%</span></div>
                            <div class="origin-text">
                                <strong>Origin:</strong> AI parsed from: 'mouse001'
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SEX -->
                <div class="metadata-field">
                    <div class="field-header"><span class="field-label">SEX</span></div>
                    <div class="field-value">M</div>
                    <div class="provenance-box ai-parsed">
                        <div class="provenance-header">AI METADATA</div>
                        <div class="provenance-details">
                            <div><strong>Source:</strong> ai-parsed</div>
                            <div><strong>Confidence:</strong> <span class="confidence-display high">95.0%</span></div>
                            <div class="origin-text">
                                <strong>Origin:</strong> AI parsed from: 'male'
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SAMPLE RATE -->
                <div class="metadata-field">
                    <div class="field-header"><span class="field-label">SAMPLE RATE</span></div>
                    <div class="field-value">30000 Hz</div>
                    <div class="provenance-box file-extracted">
                        <div class="provenance-header">FILE-EXTRACTED METADATA</div>
                        <div class="provenance-details">
                            <div><strong>Source:</strong> file-extracted</div>
                            <div><strong>Confidence:</strong> <span class="confidence-display high">100%</span></div>
                            <div class="origin-text">
                                <strong>Origin:</strong> Extracted from: 'Noise4Sam_g0_t0.imec0.ap.meta'
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- COMPLETE WORKFLOW TRACE (COLLAPSIBLE WITH ALL 9 SECTIONS) -->
        <div class="collapsible-section" id="workflow-section">
            <div class="collapsible-header" onclick="toggleSection('workflow-section')">
                <h3>üîÑ Complete Workflow Trace (Detailed - 9 Sections)</h3>
                <span class="collapsible-toggle">‚ñº</span>
            </div>
            <div class="collapsible-content">

                <!-- SECTION 1: SESSION INFO -->
                <div class="trace-section">
                    <h3>1. Session Information</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Session ID</div>
                            <div class="stat-value">session_20251104_162200</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Start Time</div>
                            <div class="stat-value">2025-11-04 16:22:00</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">End Time</div>
                            <div class="stat-value">2025-11-04 16:25:27</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Total Duration</div>
                            <div class="stat-value">3m 27s</div>
                        </div>
                    </div>
                    <div class="trace-box">
                        <strong>System Version:</strong> 1.0.0<br>
                        <strong>NWB Schema:</strong> 2.6.0<br>
                        <strong>Conversion Type:</strong> SpikeGLX ‚Üí NWB<br>
                        <strong>User:</strong> Aditya Patane<br>
                        <strong>Mode:</strong> Interactive with AI assistance
                    </div>
                </div>

                <!-- SECTION 2: INPUT FILES -->
                <div class="trace-section">
                    <h3>2. Input Files Tracking</h3>
                    <h4>Primary Data Files</h4>
                    <div class="trace-box highlight">
                        <strong>üìÑ File 1: Noise4Sam_g0_t0.imec0.ap.bin</strong>
                        <ul>
                            <li><strong>Size:</strong> 610 KB (624,640 bytes)</li>
                            <li><strong>Format:</strong> SpikeGLX binary electrophysiology data</li>
                            <li><strong>MD5:</strong> <span class="checksum">a3b5c7d9e1f2a4b6c8d0e2f4a6b8c0d2</span></li>
                            <li><strong>Creation Date:</strong> 2025-08-15 10:00:00</li>
                            <li><strong>Channels:</strong> 384 (Neuropixels 1.0 probe)</li>
                            <li><strong>Sample Rate:</strong> 30000 Hz</li>
                            <li><strong>Duration:</strong> 60 seconds</li>
                            <li><strong>Total Samples:</strong> 1,800,000</li>
                            <li><strong>Used for:</strong> Raw electrophysiology timeseries data</li>
                        </ul>
                    </div>
                    <div class="trace-box highlight">
                        <strong>üìÑ File 2: Noise4Sam_g0_t0.imec0.ap.meta</strong>
                        <ul>
                            <li><strong>Size:</strong> 2.3 KB (2,356 bytes)</li>
                            <li><strong>Format:</strong> SpikeGLX metadata (INI-style text)</li>
                            <li><strong>MD5:</strong> <span class="checksum">f4e8d6c2b0a8e6d4c2b0a8e6d4c2b0a8</span></li>
                            <li><strong>Used for:</strong> Extracting recording parameters</li>
                        </ul>
                        <div style="margin-top: 15px;">
                            <strong>Extracted Metadata Fields:</strong>
                            <div class="code-block">
<span class="key">imSampRate</span>=<span class="value">30000</span>
<span class="key">nSavedChans</span>=<span class="value">384</span>
<span class="key">fileCreateTime</span>=<span class="value">2025-08-15T10:00:00</span>
<span class="key">typeThis</span>=<span class="value">imec</span>
<span class="key">imDatPrb_type</span>=<span class="value">0</span> <span class="comment"># Neuropixels 1.0</span>
                            </div>
                        </div>
                    </div>
                    <div class="stats-grid" style="margin-top: 20px;">
                        <div class="stat-card">
                            <div class="stat-label">Total Input Files</div>
                            <div class="stat-value">2 files</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Total Input Size</div>
                            <div class="stat-value">612.3 KB</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Integrity Checks</div>
                            <div class="stat-value badge success">‚úì Passed</div>
                        </div>
                    </div>
                </div>

                <!-- SECTION 3: USER INTERACTION LOG -->
                <div class="trace-section">
                    <h3>3. User Interaction Log</h3>
                    <div class="trace-item info">
                        <span class="timestamp">[16:22:05]</span> <strong>User uploaded files</strong><br>
                        ‚îî‚îÄ Files: Noise4Sam_g0_t0.imec0.ap.bin (.meta)
                    </div>
                    <div class="trace-item info">
                        <span class="timestamp">[16:22:12]</span> <strong>Format detection requested</strong><br>
                        ‚îî‚îÄ Action: User clicked "Detect Format"
                    </div>
                    <div class="trace-item success">
                        <span class="timestamp">[16:22:14]</span> <strong>Format detected: SpikeGLX</strong><br>
                        ‚îî‚îÄ Confidence: 100% (file extension + metadata format match)
                    </div>
                    <div class="trace-item info">
                        <span class="timestamp">[16:22:20]</span> <strong>User provided metadata via chat</strong><br>
                        <div style="margin-top: 10px; padding: 10px; background: white; border-radius: 4px;">
                            <strong>Input text:</strong>
                            <div class="code-block" style="margin-top: 5px;">
"This is a neuroscience experiment with Dr. Jane Smith from MIT.
We're recording neural activity from the visual cortex of a
laboratory mouse. The subject is mouse001, a male C57BL/6 strain,
P60 (60 days old). Session was on August 15, 2025 at 10 AM."
                            </div>
                        </div>
                    </div>
                    <div class="trace-item info">
                        <span class="timestamp">[16:22:21]</span> <strong>AI metadata extraction triggered</strong><br>
                        ‚îî‚îÄ Service: Anthropic Claude API (claude-3-5-sonnet-20241022)
                    </div>
                    <div class="trace-item success">
                        <span class="timestamp">[16:22:24]</span> <strong>AI extracted 8 metadata fields</strong><br>
                        ‚îî‚îÄ Fields: experimenter, institution, experiment_description, subject_id, sex, strain, age, session_start_time
                    </div>
                    <div class="trace-item info">
                        <span class="timestamp">[16:22:25]</span> <strong>User confirmed metadata</strong><br>
                        ‚îî‚îÄ Action: User clicked "Start Conversion"
                    </div>
                    <div class="trace-item success">
                        <span class="timestamp">[16:25:20]</span> <strong>Conversion completed</strong><br>
                        ‚îî‚îÄ Output: converted_nwb_uploads.nwb (628 KB)
                    </div>
                    <div class="trace-item success">
                        <span class="timestamp">[16:25:27]</span> <strong>Validation completed</strong><br>
                        ‚îî‚îÄ Status: PASSED_WITH_ISSUES (0 critical, 0 errors, 2 missing fields)
                    </div>
                </div>

                <!-- SECTION 4: AI PROCESSING DETAILS -->
                <div class="trace-section">
                    <h3>4. AI Processing Log</h3>
                    <div class="trace-box highlight">
                        <h4>AI Service Configuration</h4>
                        <ul>
                            <li><strong>Provider:</strong> Anthropic</li>
                            <li><strong>Model:</strong> claude-3-5-sonnet-20241022</li>
                            <li><strong>Purpose:</strong> Natural language metadata extraction</li>
                            <li><strong>API Version:</strong> 2023-06-01</li>
                        </ul>
                    </div>

                    <h4 class="expandable" onclick="toggleExpand(this)">
                        <span class="expand-icon">‚ñ∂</span> REQUEST #1: Metadata Extraction (click to expand)
                    </h4>
                    <div class="expandable-content">
                        <div class="trace-box">
                            <p><span class="timestamp">Timestamp: 2025-11-04 16:22:21</span></p>

                            <h4>Input Prompt (truncated):</h4>
                            <div class="code-block">
<span class="comment">// System Prompt</span>
<span class="key">"You are an expert at extracting neuroscience metadata from natural language."</span>

<span class="comment">// User Prompt</span>
<span class="key">"Extract all metadata fields from this text:</span>

<span class="value">This is a neuroscience experiment with Dr. Jane Smith from MIT..."</span>
                            </div>

                            <h4 style="margin-top: 20px;">AI Response (8 fields extracted):</h4>
                            <div class="code-block">
{
  <span class="key">"fields"</span>: [
    {
      <span class="key">"field_name"</span>: <span class="value">"experimenter"</span>,
      <span class="key">"raw_value"</span>: <span class="value">"Dr. Jane Smith"</span>,
      <span class="key">"normalized_value"</span>: <span class="value">"Smith, Jane"</span>,
      <span class="key">"confidence"</span>: <span class="value">95</span>,
      <span class="key">"reasoning"</span>: <span class="value">"Explicitly stated with title"</span>,
      <span class="key">"extraction_type"</span>: <span class="value">"explicit"</span>
    },
    <span class="comment">... (7 more fields)</span>
  ]
}
                            </div>

                            <h4 style="margin-top: 20px;">Processing Statistics:</h4>
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-label">Processing Time</div>
                                    <div class="stat-value">2.8s</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">Tokens (Input)</div>
                                    <div class="stat-value">245</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">Tokens (Output)</div>
                                    <div class="stat-value">387</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">Estimated Cost</div>
                                    <div class="stat-value">$0.0034 USD</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="trace-box" style="margin-top: 20px;">
                        <h4>AI Usage Summary</h4>
                        <ul>
                            <li><strong>Total API calls:</strong> 1</li>
                            <li><strong>Total processing time:</strong> 2.8 seconds</li>
                            <li><strong>Fields extracted:</strong> 8</li>
                            <li style="margin-left: 20px;">‚îú‚îÄ Explicit (user stated): 5 fields</li>
                            <li style="margin-left: 20px;">‚îî‚îÄ Inferred (AI deduced): 3 fields</li>
                            <li><strong>Average confidence:</strong> 88.75%</li>
                            <li><strong>Total cost:</strong> $0.0034 USD</li>
                        </ul>
                    </div>
                </div>

                <!-- SECTION 5: CONVERSION PIPELINE STEPS -->
                <div class="trace-section">
                    <h3>5. Conversion Pipeline</h3>

                    <h4>STEP 1: Format Detection</h4>
                    <div class="trace-item success">
                        <span class="timestamp">Start: 16:22:12 | Duration: 0.15s | Status: ‚úÖ Completed</span>
                        <div style="margin-top: 10px;">
                            <strong>Method:</strong> File extension + metadata signature analysis<br>
                            <strong>Operations:</strong>
                            <ul>
                                <li>Check file extension: .imec0.ap.bin ‚Üí SpikeGLX format</li>
                                <li>Parse .meta file structure ‚Üí Confirmed SpikeGLX</li>
                                <li>Validate metadata fields ‚Üí All required fields present</li>
                            </ul>
                            <strong>Result:</strong> format='spikeglx', confidence=100%
                        </div>
                    </div>

                    <h4>STEP 2: Metadata Collection</h4>
                    <div class="trace-item success">
                        <span class="timestamp">Start: 16:22:20 | Duration: 4.2s | Status: ‚úÖ Completed</span>
                        <div style="margin-top: 10px;">
                            <strong>Sources:</strong>
                            <ul>
                                <li>User input (chat): 8 fields
                                    <ul>
                                        <li>AI processing: 2.8s (Anthropic Claude)</li>
                                        <li>Validation: 0.2s (format checking)</li>
                                        <li>Normalization: 0.1s (ISO formats, case corrections)</li>
                                    </ul>
                                </li>
                                <li>.meta file extraction: 4 fields (sample_rate, channels, date, device)</li>
                                <li>NWB schema defaults: 3 fields (nwb_version, identifier, etc.)</li>
                            </ul>
                            <strong>Result:</strong> 15 metadata fields collected
                        </div>
                    </div>

                    <h4>STEP 3: Data Conversion</h4>
                    <div class="trace-item success">
                        <span class="timestamp">Start: 16:22:25 | Duration: 2m 55s | Status: ‚úÖ Completed</span>
                        <div style="margin-top: 10px;">
                            <strong>Converter:</strong> NeuroConv v0.4.10 (SpikeGLXRecordingInterface)<br>
                            <strong>Operations breakdown:</strong>
                            <table>
                                <tr><th>Operation</th><th>Duration</th><th>Details</th></tr>
                                <tr><td>Read binary data</td><td>1.2s</td><td>Load 610 KB binary file into memory</td></tr>
                                <tr><td>Parse metadata</td><td>0.3s</td><td>Extract recording parameters from .meta</td></tr>
                                <tr><td>Create NWB structure</td><td>0.8s</td><td>Initialize NWB file with metadata</td></tr>
                                <tr><td>Write electrode table</td><td>2.1s</td><td>Create 384-row electrode table</td></tr>
                                <tr><td>Write timeseries data</td><td>2m 48s</td><td>Write 1.8M samples with GZIP compression</td></tr>
                                <tr><td>Finalize file</td><td>0.5s</td><td>Close HDF5 file, write checksums</td></tr>
                            </table>
                            <strong>Data processed:</strong>
                            <ul>
                                <li>Channels: 384 (Neuropixels 1.0)</li>
                                <li>Samples: 1,800,000 (60s @ 30kHz)</li>
                                <li>Input size: 610 KB ‚Üí Output size: 628 KB (NWB HDF5)</li>
                                <li>Compression: GZIP level 4, ratio: 1.03x</li>
                            </ul>
                        </div>
                    </div>

                    <h4>STEP 4: NWB Validation</h4>
                    <div class="trace-item success">
                        <span class="timestamp">Start: 16:25:20 | Duration: 7.1s | Status: ‚úÖ Completed</span>
                        <div style="margin-top: 10px;">
                            <strong>Validator:</strong> NWBInspector v0.6.5<br>
                            <strong>Checks performed:</strong> 47 total
                            <ul>
                                <li>Schema validation: PASSED</li>
                                <li>Required fields check: PASSED</li>
                                <li>Data integrity check: PASSED</li>
                                <li>Best practices check: PASSED (0 violations)</li>
                                <li>DANDI requirements: PASSED (but 2 fields missing)</li>
                            </ul>
                            <strong>Issues found:</strong> 0 critical, 0 errors, 0 warnings, 2 missing recommended fields
                        </div>
                    </div>

                    <h4>STEP 5: Report Generation</h4>
                    <div class="trace-item success">
                        <span class="timestamp">Start: 16:25:27 | Duration: 0.3s | Status: ‚úÖ Completed</span>
                        <div style="margin-top: 10px;">
                            <strong>Formats generated:</strong>
                            <ul>
                                <li>HTML report: 847 KB (interactive)</li>
                                <li>JSON report: 12 KB (machine-readable)</li>
                                <li>Text report: 8 KB (NWBInspector format)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="trace-box" style="margin-top: 20px;">
                        <h4>Pipeline Summary</h4>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-label">Total Steps</div>
                                <div class="stat-value">5</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Successful</div>
                                <div class="stat-value badge success">5 ‚úì</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Failed</div>
                                <div class="stat-value">0</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Total Time</div>
                                <div class="stat-value">3m 27s</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SECTION 6: METADATA PROVENANCE TRACE -->
                <div class="trace-section">
                    <h3>6. Metadata Provenance Trace</h3>
                    <p style="color: #64748b; margin-bottom: 15px;">Complete provenance chain for every metadata field</p>

                    <h4 class="expandable" onclick="toggleExpand(this)">
                        <span class="expand-icon">‚ñ∂</span> FIELD: experimenter (click to expand)
                    </h4>
                    <div class="expandable-content">
                        <div class="trace-box">
                            <p><strong>Final Value:</strong> ["Smith, Jane"]</p>

                            <div class="provenance-chain">
                                <div class="provenance-step">
                                    <span class="badge info">Step 1</span>
                                    <span class="timestamp">[16:22:20]</span> User input (chat)<br>
                                    ‚îî‚îÄ Raw: "Dr. Jane Smith"
                                </div>

                                <div class="provenance-step">
                                    <span class="badge info">Step 2</span>
                                    <span class="timestamp">[16:22:21]</span> AI extraction (Anthropic Claude)<br>
                                    ‚îú‚îÄ Extraction type: explicit<br>
                                    ‚îú‚îÄ Normalized to: "Smith, Jane"<br>
                                    ‚îú‚îÄ Confidence: 95%<br>
                                    ‚îî‚îÄ Reasoning: "Explicitly stated with title 'Dr.'"
                                </div>

                                <div class="provenance-step">
                                    <span class="badge info">Step 3</span>
                                    <span class="timestamp">[16:22:24]</span> Format validation<br>
                                    ‚îú‚îÄ Checked: "LastName, FirstName" format<br>
                                    ‚îî‚îÄ Status: ‚úÖ Valid
                                </div>

                                <div class="provenance-step">
                                    <span class="badge success">Step 4</span>
                                    <span class="timestamp">[16:22:25]</span> Applied to NWB<br>
                                    ‚îî‚îÄ Location: /general/experimenter
                                </div>
                            </div>

                            <div style="margin-top: 15px; padding: 15px; background: #ecfdf5; border-radius: 4px;">
                                <strong>Final Classification:</strong><br>
                                ‚îú‚îÄ Provenance: AI_PARSED<br>
                                ‚îú‚îÄ Confidence: 95% (High)<br>
                                ‚îú‚îÄ Needs review: No<br>
                                ‚îî‚îÄ DANDI ready: Yes
                            </div>
                        </div>
                    </div>

                    <h4 class="expandable" onclick="toggleExpand(this)">
                        <span class="expand-icon">‚ñ∂</span> FIELD: species (click to expand)
                    </h4>
                    <div class="expandable-content">
                        <div class="trace-box">
                            <p><strong>Final Value:</strong> "Mus musculus"</p>

                            <div class="provenance-chain">
                                <div class="provenance-step">
                                    <span class="badge info">Step 1</span>
                                    <span class="timestamp">[16:22:20]</span> User input (chat)<br>
                                    ‚îî‚îÄ Raw: "laboratory mouse"
                                </div>

                                <div class="provenance-step">
                                    <span class="badge warning">Step 2</span>
                                    <span class="timestamp">[16:22:21]</span> AI inference (Anthropic Claude)<br>
                                    ‚îú‚îÄ Extraction type: inferred<br>
                                    ‚îú‚îÄ Inferred as: "Mus musculus"<br>
                                    ‚îú‚îÄ Confidence: 90%<br>
                                    ‚îî‚îÄ Reasoning: "Common lab species inference from 'laboratory mouse' context"
                                </div>

                                <div class="provenance-step">
                                    <span class="badge info">Step 3</span>
                                    <span class="timestamp">[16:22:24]</span> Taxonomy validation<br>
                                    ‚îú‚îÄ Checked against: NCBI Taxonomy<br>
                                    ‚îî‚îÄ Status: ‚úÖ Valid scientific name
                                </div>

                                <div class="provenance-step">
                                    <span class="badge success">Step 4</span>
                                    <span class="timestamp">[16:22:25]</span> Applied to NWB<br>
                                    ‚îî‚îÄ Location: /general/subject/species
                                </div>
                            </div>

                            <div style="margin-top: 15px; padding: 15px; background: #fffbeb; border-radius: 4px;">
                                <strong>Final Classification:</strong><br>
                                ‚îú‚îÄ Provenance: AI_INFERRED<br>
                                ‚îú‚îÄ Confidence: 90% (High)<br>
                                ‚îú‚îÄ Needs review: ‚ö†Ô∏è Recommended (inferred value)<br>
                                ‚îî‚îÄ DANDI ready: Yes (but verify scientific name)
                            </div>
                        </div>
                    </div>

                    <div class="trace-box" style="margin-top: 20px;">
                        <h4>Provenance Summary (All 15 Fields)</h4>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-label">User-Specified</div>
                                <div class="stat-value">0 (0%)</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">AI-Parsed</div>
                                <div class="stat-value">5 (33%)</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">AI-Inferred</div>
                                <div class="stat-value">3 (20%)</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">File-Extracted</div>
                                <div class="stat-value">4 (27%)</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">System-Default</div>
                                <div class="stat-value">3 (20%)</div>
                            </div>
                        </div>

                        <h4 style="margin-top: 20px;">Confidence Distribution:</h4>
                        <ul>
                            <li>High (80-100%): 8 fields ‚Üí ‚úÖ DANDI ready</li>
                            <li>Medium (50-79%): 0 fields ‚Üí ‚ö†Ô∏è Review recommended</li>
                            <li>Low (0-49%): 0 fields ‚Üí ‚ùå Must verify</li>
                        </ul>

                        <h4 style="margin-top: 15px;">Review Recommendations:</h4>
                        <p>3 AI-Inferred fields should be verified before DANDI submission:</p>
                        <ul>
                            <li>species (Mus musculus)</li>
                            <li>experiment_description</li>
                            <li>session_description</li>
                        </ul>
                    </div>
                </div>

                <!-- SECTION 7: OUTPUT FILES -->
                <div class="trace-section">
                    <h3>7. Output Files Summary</h3>

                    <h4>Primary Output</h4>
                    <div class="trace-box highlight">
                        <strong>üì§ File: converted_nwb_uploads.nwb</strong>
                        <ul>
                            <li><strong>Size:</strong> 628,886 bytes (628 KB)</li>
                            <li><strong>Format:</strong> NWB 2.6.0 (HDF5)</li>
                            <li><strong>Created:</strong> 2025-11-04 16:25:20</li>
                            <li><strong>MD5:</strong> <span class="checksum">7f9d8e6c5b4a3e2d1c0b9a8e7f6d5c4b</span></li>
                            <li><strong>Validation:</strong> ‚úÖ PASSED (0 critical issues)</li>
                            <li><strong>DANDI ready:</strong> ‚ö†Ô∏è Yes (but 2 fields recommended)</li>
                        </ul>

                        <strong>Contents:</strong>
                        <ul style="margin-top: 10px;">
                            <li>/acquisition/ElectricalSeries (384 channels, 1.8M samples)</li>
                            <li>/general/electrodes (384 rows: location, impedance, group)</li>
                            <li>/general/subject (metadata: id, sex, age, strain)</li>
                            <li>/general/devices (Neuropixels 1.0 probe information)</li>
                        </ul>
                    </div>

                    <h4>Report Files</h4>
                    <table>
                        <tr><th>File</th><th>Size</th><th>Format</th><th>Purpose</th></tr>
                        <tr><td>evaluation_report.html</td><td>847 KB</td><td>HTML</td><td>Interactive validation report</td></tr>
                        <tr><td>evaluation_report.json</td><td>12 KB</td><td>JSON</td><td>Machine-readable validation data</td></tr>
                        <tr><td>evaluation_report.txt</td><td>8 KB</td><td>Text</td><td>NWBInspector-style text report</td></tr>
                    </table>

                    <div class="stats-grid" style="margin-top: 20px;">
                        <div class="stat-card">
                            <div class="stat-label">Total Output Files</div>
                            <div class="stat-value">4 files</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Total Output Size</div>
                            <div class="stat-value">1.5 MB</div>
                        </div>
                    </div>
                </div>

                <!-- SECTION 8: SYSTEM ENVIRONMENT -->
                <div class="trace-section">
                    <h3>8. System Environment</h3>

                    <h4>Platform Information</h4>
                    <div class="trace-box">
                        <ul>
                            <li><strong>Operating System:</strong> macOS 14.0 (Sonoma)</li>
                            <li><strong>Python Version:</strong> 3.11.4</li>
                            <li><strong>Architecture:</strong> arm64 (Apple Silicon M1/M2)</li>
                            <li><strong>Hostname:</strong> localhost</li>
                            <li><strong>User:</strong> adityapatane</li>
                        </ul>
                    </div>

                    <h4>Core Dependencies</h4>
                    <table>
                        <tr><th>Package</th><th>Version</th><th>Purpose</th></tr>
                        <tr><td>pynwb</td><td>2.6.0</td><td>NWB file creation and manipulation</td></tr>
                        <tr><td>neuroconv</td><td>0.4.10</td><td>Format conversion framework</td></tr>
                        <tr><td>nwbinspector</td><td>0.6.5</td><td>NWB file validation</td></tr>
                        <tr><td>spikeinterface</td><td>0.100.0</td><td>Electrophysiology data handling</td></tr>
                        <tr><td>h5py</td><td>3.10.0</td><td>HDF5 file I/O</td></tr>
                        <tr><td>numpy</td><td>1.26.0</td><td>Numerical computations</td></tr>
                        <tr><td>hdmf</td><td>3.12.0</td><td>Hierarchical Data Modeling Framework</td></tr>
                    </table>

                    <h4>AI Services</h4>
                    <div class="trace-box">
                        <ul>
                            <li><strong>Provider:</strong> Anthropic</li>
                            <li><strong>Model:</strong> claude-3-5-sonnet-20241022</li>
                            <li><strong>API Version:</strong> 2023-06-01</li>
                            <li><strong>SDK:</strong> anthropic-sdk-python 0.18.0</li>
                        </ul>
                    </div>

                    <h4>Environment Variables</h4>
                    <div class="code-block">
<span class="key">ANTHROPIC_API_KEY</span>=<span class="value">sk-ant-api03-...***15 characters (hidden)</span>
<span class="key">NWB_INSPECTOR_DANDI_MODE</span>=<span class="value">true</span>
<span class="key">PYTHON_PATH</span>=<span class="value">/usr/local/bin/python3.11</span>
                    </div>
                </div>

                <!-- SECTION 9: ERROR & WARNING LOG -->
                <div class="trace-section">
                    <h3>9. Process Log (Errors & Warnings)</h3>

                    <div class="trace-item success" style="padding: 20px; text-align: center;">
                        <h4>‚úÖ No errors encountered during this conversion</h4>
                        <p style="color: #64748b; margin-top: 10px;">All steps completed successfully without warnings or errors</p>
                    </div>

                    <h4>Informational Messages</h4>
                    <div class="trace-item info">
                        <span class="timestamp">[16:22:14]</span> INFO: SpikeGLX format detected with 100% confidence
                    </div>
                    <div class="trace-item info">
                        <span class="timestamp">[16:22:21]</span> INFO: AI extraction started (Anthropic Claude API)
                    </div>
                    <div class="trace-item info">
                        <span class="timestamp">[16:22:24]</span> INFO: 8 metadata fields extracted successfully
                    </div>
                    <div class="trace-item success">
                        <span class="timestamp">[16:22:25]</span> INFO: Conversion started using NeuroConv v0.4.10
                    </div>
                    <div class="trace-item success">
                        <span class="timestamp">[16:25:20]</span> INFO: NWB file created successfully (628 KB)
                    </div>
                    <div class="trace-item success">
                        <span class="timestamp">[16:25:27]</span> INFO: Validation passed (0 critical, 0 errors, 2 missing recommended fields)
                    </div>
                </div>

            </div>
        </div>

        <!-- FOOTER -->
        <div class="footer">
            <p>ü§ñ Generated with <strong>AI-Assisted NWB Conversion Tool</strong> v1.0.0</p>
            <p style="margin-top: 8px;">Using: PyNWB 2.6.0 | NeuroConv 0.4.10 | NWBInspector 0.6.5 | Anthropic Claude API</p>
            <p style="margin-top: 8px;">
                <a href="#" style="color: #2563eb; text-decoration: none;">Documentation</a> |
                <a href="#" style="color: #2563eb; text-decoration: none;">Report Issues</a>
            </p>
        </div>
    </div>

    <script>
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            section.classList.toggle('open');
        }

        function toggleExpand(element) {
            element.classList.toggle('open');
            const content = element.nextElementSibling;
            content.classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Animate progress bars
            const progressBars = document.querySelectorAll('.progress-bar');
            progressBars.forEach(bar => {
                const width = bar.style.width;
                bar.style.width = '0%';
                setTimeout(() => {
                    bar.style.width = width;
                }, 100);
            });

            // Animate circular progress indicators
            const circles = document.querySelectorAll('.score-circle');
            circles.forEach(circle => {
                const scoreText = circle.querySelector('.score-text');
                if (scoreText) {
                    const score = parseInt(scoreText.textContent.replace('%', '')) || 0;
                    const circumference = 2 * Math.PI * 45;
                    const offset = circumference - (score / 100) * circumference;

                    const fillCircle = circle.querySelector('circle.fill');
                    if (fillCircle) {
                        fillCircle.style.strokeDashoffset = circumference;
                        setTimeout(() => {
                            fillCircle.style.strokeDashoffset = offset;
                        }, 500);
                    }
                }
            });

            console.log('üî¨ Final Enhanced NWB Report Loaded (with full workflow trace, no reproducibility certificate)');
        });
    </script>
</body>
</html>
